{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///F:/WORK/Hospital%20Management%20system/HMS_App/frontend/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api/v1';\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n    baseURL: API_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// Request interceptor - add auth token\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        if (typeof window !== 'undefined') {\r\n            const token = localStorage.getItem('accessToken');\r\n            if (token) {\r\n                config.headers.Authorization = `Bearer ${token}`;\r\n            }\r\n        }\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\n// Response interceptor - handle errors\r\napi.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        if (error.response?.status === 401) {\r\n            // Clear auth data and redirect to login\r\n            if (typeof window !== 'undefined') {\r\n                localStorage.removeItem('accessToken');\r\n                localStorage.removeItem('user');\r\n                window.location.href = '/login';\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default api;\r\n\r\n// Auth API\r\nexport const authApi = {\r\n    login: (email: string, password: string) =>\r\n        api.post('/auth/login', { email, password }),\r\n\r\n    getCurrentUser: () => api.get('/auth/me'),\r\n\r\n    logout: () => api.post('/auth/logout'),\r\n};\r\n\r\n// Dashboard API\r\nexport const dashboardApi = {\r\n    getStats: () => api.get('/dashboard/stats'),\r\n    getRecentPatients: (limit = 5) => api.get(`/dashboard/recent-patients?limit=${limit}`),\r\n    getTodayAppointments: () => api.get('/dashboard/today-appointments'),\r\n};\r\n\r\n// Patients API\r\nexport const patientsApi = {\r\n    getAll: (page = 1, limit = 10, search = '') =>\r\n        api.get(`/patients?page=${page}&limit=${limit}${search ? `&search=${search}` : ''}`),\r\n\r\n    getById: (id: string) => api.get(`/patients/${id}`),\r\n\r\n    create: (data: any) => api.post('/patients', data),\r\n\r\n    update: (id: string, data: any) => api.put(`/patients/${id}`, data),\r\n\r\n    delete: (id: string) => api.delete(`/patients/${id}`),\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,MAAM,UAAU,oEAAmC;AAEnD,wBAAwB;AACxB,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,uCAAuC;AACvC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG;;IAMA,OAAO;AACX,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG9B,uCAAuC;AACvC,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAChC,wCAAwC;QACxC;;IAKJ;IACA,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW;AAGR,MAAM,UAAU;IACnB,OAAO,CAAC,OAAe,WACnB,IAAI,IAAI,CAAC,eAAe;YAAE;YAAO;QAAS;IAE9C,gBAAgB,IAAM,IAAI,GAAG,CAAC;IAE9B,QAAQ,IAAM,IAAI,IAAI,CAAC;AAC3B;AAGO,MAAM,eAAe;IACxB,UAAU,IAAM,IAAI,GAAG,CAAC;IACxB,mBAAmB,CAAC,QAAQ,CAAC,GAAK,IAAI,GAAG,CAAC,CAAC,iCAAiC,EAAE,OAAO;IACrF,sBAAsB,IAAM,IAAI,GAAG,CAAC;AACxC;AAGO,MAAM,cAAc;IACvB,QAAQ,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,GACtC,IAAI,GAAG,CAAC,CAAC,eAAe,EAAE,KAAK,OAAO,EAAE,QAAQ,SAAS,CAAC,QAAQ,EAAE,QAAQ,GAAG,IAAI;IAEvF,SAAS,CAAC,KAAe,IAAI,GAAG,CAAC,CAAC,UAAU,EAAE,IAAI;IAElD,QAAQ,CAAC,OAAc,IAAI,IAAI,CAAC,aAAa;IAE7C,QAAQ,CAAC,IAAY,OAAc,IAAI,GAAG,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE;IAE9D,QAAQ,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,UAAU,EAAE,IAAI;AACxD"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///F:/WORK/Hospital%20Management%20system/HMS_App/frontend/src/lib/auth.ts"],"sourcesContent":["'use client';\r\n\r\nimport { authApi } from './api';\r\n\r\nexport interface User {\r\n    id: string;\r\n    email: string;\r\n    name: string;\r\n    phone: string | null;\r\n    avatar: string | null;\r\n    role: {\r\n        id: string;\r\n        name: string;\r\n        displayName: string;\r\n        permissions: string[];\r\n    };\r\n}\r\n\r\nexport const authService = {\r\n    /**\r\n     * Login user and store tokens\r\n     */\r\n    async login(email: string, password: string): Promise<User> {\r\n        const response = await authApi.login(email, password);\r\n        const { user, accessToken, refreshToken } = response.data.data;\r\n\r\n        // Store tokens\r\n        localStorage.setItem('accessToken', accessToken);\r\n        localStorage.setItem('refreshToken', refreshToken);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n\r\n        return user;\r\n    },\r\n\r\n    /**\r\n     * Get current user from localStorage or API\r\n     */\r\n    async getCurrentUser(): Promise<User | null> {\r\n        // First check localStorage\r\n        const userStr = localStorage.getItem('user');\r\n        if (userStr) {\r\n            return JSON.parse(userStr);\r\n        }\r\n\r\n        // If no local user, try API\r\n        const token = localStorage.getItem('accessToken');\r\n        if (!token) return null;\r\n\r\n        try {\r\n            const response = await authApi.getCurrentUser();\r\n            const user = response.data.data;\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        } catch {\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Logout user and clear tokens\r\n     */\r\n    logout(): void {\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('refreshToken');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/login';\r\n    },\r\n\r\n    /**\r\n     * Check if user is authenticated\r\n     */\r\n    isAuthenticated(): boolean {\r\n        if (typeof window === 'undefined') return false;\r\n        return !!localStorage.getItem('accessToken');\r\n    },\r\n\r\n    /**\r\n     * Get stored user\r\n     */\r\n    getUser(): User | null {\r\n        if (typeof window === 'undefined') return null;\r\n        const userStr = localStorage.getItem('user');\r\n        return userStr ? JSON.parse(userStr) : null;\r\n    },\r\n\r\n    /**\r\n     * Check if user has permission\r\n     */\r\n    hasPermission(permission: string): boolean {\r\n        const user = this.getUser();\r\n        if (!user) return false;\r\n\r\n        // Admin has all permissions\r\n        if (user.role.name === 'admin') return true;\r\n\r\n        // Check specific permission\r\n        return user.role.permissions.includes(permission) ||\r\n            user.role.permissions.includes('*');\r\n    },\r\n\r\n    /**\r\n     * Check if user has role\r\n     */\r\n    hasRole(role: string): boolean {\r\n        const user = this.getUser();\r\n        return user?.role.name === role;\r\n    },\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAkBO,MAAM,cAAc;IACvB;;KAEC,GACD,MAAM,OAAM,KAAa,EAAE,QAAgB;QACvC,MAAM,WAAW,MAAM,4HAAO,CAAC,KAAK,CAAC,OAAO;QAC5C,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,IAAI;QAE9D,eAAe;QACf,aAAa,OAAO,CAAC,eAAe;QACpC,aAAa,OAAO,CAAC,gBAAgB;QACrC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAE5C,OAAO;IACX;IAEA;;KAEC,GACD,MAAM;QACF,2BAA2B;QAC3B,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,SAAS;YACT,OAAO,KAAK,KAAK,CAAC;QACtB;QAEA,4BAA4B;QAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO,OAAO;QAEnB,IAAI;YACA,MAAM,WAAW,MAAM,4HAAO,CAAC,cAAc;YAC7C,MAAM,OAAO,SAAS,IAAI,CAAC,IAAI;YAC/B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,OAAO;QACX,EAAE,OAAM;YACJ,OAAO;QACX;IACJ;IAEA;;KAEC,GACD;QACI,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IAEA;;KAEC,GACD;QACI,wCAAmC,OAAO;;;IAE9C;IAEA;;KAEC,GACD;QACI,wCAAmC,OAAO;;;QAC1C,MAAM;IAEV;IAEA;;KAEC,GACD,eAAc,UAAkB;QAC5B,MAAM,OAAO,IAAI,CAAC,OAAO;QACzB,IAAI,CAAC,MAAM,OAAO;QAElB,4BAA4B;QAC5B,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,SAAS,OAAO;QAEvC,4BAA4B;QAC5B,OAAO,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,eAClC,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;IACvC;IAEA;;KAEC,GACD,SAAQ,IAAY;QAChB,MAAM,OAAO,IAAI,CAAC,OAAO;QACzB,OAAO,MAAM,KAAK,SAAS;IAC/B;AACJ"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///F:/WORK/Hospital%20Management%20system/HMS_App/frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Eye, EyeOff, Loader2, Building2 } from 'lucide-react';\r\nimport { authService } from '@/lib/auth';\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            await authService.login(email, password);\r\n            router.push('/dashboard');\r\n        } catch (err: any) {\r\n            const message = err.response?.data?.error?.message || 'Login failed. Please try again.';\r\n            setError(message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 via-white to-cyan-50\">\r\n            {/* Background Pattern */}\r\n            <div className=\"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%232D9B9B%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E')] opacity-70\" />\r\n\r\n            {/* Login Card */}\r\n            <div className=\"relative w-full max-w-md mx-4\">\r\n                <div className=\"bg-white rounded-2xl shadow-2xl shadow-teal-500/10 p-8 border border-gray-100\">\r\n                    {/* Logo & Title */}\r\n                    <div className=\"text-center mb-8\">\r\n                        <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg shadow-teal-500/30\">\r\n                            <Building2 className=\"w-8 h-8 text-white\" />\r\n                        </div>\r\n                        <h1 className=\"text-2xl font-bold text-gray-900\">BN Hospital</h1>\r\n                        <p className=\"text-gray-500 mt-1\">Hospital Management System</p>\r\n                    </div>\r\n\r\n                    {/* Error Message */}\r\n                    {error && (\r\n                        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Login Form */}\r\n                    <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                        {/* Email Field */}\r\n                        <div>\r\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                Email Address\r\n                            </label>\r\n                            <input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                required\r\n                                placeholder=\"admin@bnhospital.com\"\r\n                                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all outline-none text-gray-900 placeholder:text-gray-400\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Password Field */}\r\n                        <div>\r\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                Password\r\n                            </label>\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    id=\"password\"\r\n                                    type={showPassword ? 'text' : 'password'}\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    required\r\n                                    placeholder=\"••••••••\"\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all outline-none text-gray-900 placeholder:text-gray-400 pr-12\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                                >\r\n                                    {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Submit Button */}\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full py-3 px-4 bg-gradient-to-r from-teal-500 to-cyan-600 text-white font-semibold rounded-xl hover:from-teal-600 hover:to-cyan-700 focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-teal-500/25\"\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                    Signing in...\r\n                                </>\r\n                            ) : (\r\n                                'Sign In'\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    {/* Demo Credentials */}\r\n                    <div className=\"mt-8 p-4 bg-gray-50 rounded-xl border border-gray-100\">\r\n                        <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2\">Demo Credentials</p>\r\n                        <div className=\"space-y-1 text-sm text-gray-600\">\r\n                            <p><span className=\"font-medium\">Admin:</span> admin@bnhospital.com / Admin@123</p>\r\n                            <p><span className=\"font-medium\">Doctor:</span> doctor@bnhospital.com / Admin@123</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <p className=\"text-center text-gray-400 text-sm mt-6\">\r\n                    © 2026 BN Hospital. All rights reserved.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACA,MAAM,iIAAW,CAAC,KAAK,CAAC,OAAO;YAC/B,OAAO,IAAI,CAAC;QAChB,EAAE,OAAO,KAAU;YACf,MAAM,UAAU,IAAI,QAAQ,EAAE,MAAM,OAAO,WAAW;YACtD,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CAEX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;kDACX,cAAA,8OAAC,6NAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8OAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,8OAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;4BAIrC,uBACG,8OAAC;gCAAI,WAAU;0CACV;;;;;;0CAKT,8OAAC;gCAAK,UAAU;gCAAc,WAAU;;kDAEpC,8OAAC;;0DACG,8OAAC;gDAAM,SAAQ;gDAAQ,WAAU;0DAA+C;;;;;;0DAGhF,8OAAC;gDACG,IAAG;gDACH,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gDACxC,QAAQ;gDACR,aAAY;gDACZ,WAAU;;;;;;;;;;;;kDAKlB,8OAAC;;0DACG,8OAAC;gDAAM,SAAQ;gDAAW,WAAU;0DAA+C;;;;;;0DAGnF,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDACG,IAAG;wDACH,MAAM,eAAe,SAAS;wDAC9B,OAAO;wDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wDAC3C,QAAQ;wDACR,aAAY;wDACZ,WAAU;;;;;;kEAEd,8OAAC;wDACG,MAAK;wDACL,SAAS,IAAM,gBAAgB,CAAC;wDAChC,WAAU;kEAET,6BAAe,8OAAC,oNAAM;4DAAC,WAAU;;;;;iFAAe,8OAAC,uMAAG;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kDAM5E,8OAAC;wCACG,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,wBACG;;8DACI,8OAAC,4NAAO;oDAAC,WAAU;;;;;;gDAAyB;;2DAIhD;;;;;;;;;;;;0CAMZ,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAE,WAAU;kDAAiE;;;;;;kDAC9E,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;;kEAAE,8OAAC;wDAAK,WAAU;kEAAc;;;;;;oDAAa;;;;;;;0DAC9C,8OAAC;;kEAAE,8OAAC;wDAAK,WAAU;kEAAc;;;;;;oDAAc;;;;;;;;;;;;;;;;;;;;;;;;;kCAM3D,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;;AAMtE"}}]
}